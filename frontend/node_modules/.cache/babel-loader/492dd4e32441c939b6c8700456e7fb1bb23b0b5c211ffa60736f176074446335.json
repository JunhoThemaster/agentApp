{"ast":null,"code":"var _jsxFileName = \"/home/user2/\\uBB38\\uC11C/agentApp/frontend/src/components/SearchPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport \"../SearchPage.css\";\nimport { useSearchVideos } from \"../hooks/useSearchVideos\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchPage = () => {\n  _s();\n  const {\n    query,\n    setQuery,\n    textResults,\n    imageResults,\n    videoRefs,\n    handleSearch\n  } = useSearchVideos();\n\n  // 카드별 통계 데이터/로딩/오류 상태 관리 (session_id 기준)\n  const [statsMap, setStatsMap] = useState({});\n  const [openMap, setOpenMap] = useState({});\n  const [loadingMap, setLoadingMap] = useState({});\n  const [errorMap, setErrorMap] = useState({});\n  const fetchStats = async sessionId => {\n    // 이미 불러온 게 있으면 열기/닫기만 토글\n    if (statsMap[sessionId]) {\n      setOpenMap(m => ({\n        ...m,\n        [sessionId]: !m[sessionId]\n      }));\n      return;\n    }\n    try {\n      setLoadingMap(m => ({\n        ...m,\n        [sessionId]: true\n      }));\n      setErrorMap(m => ({\n        ...m,\n        [sessionId]: null\n      }));\n      const res = await fetch(`http://localhost:8000/api/stats/${encodeURIComponent(sessionId)}`);\n      if (!res.ok) {\n        const msg = await res.text();\n        throw new Error(msg || `HTTP ${res.status}`);\n      }\n      const data = await res.json();\n      setStatsMap(m => ({\n        ...m,\n        [sessionId]: data\n      }));\n      setOpenMap(m => ({\n        ...m,\n        [sessionId]: true\n      }));\n    } catch (e) {\n      setErrorMap(m => {\n        var _e$message;\n        return {\n          ...m,\n          [sessionId]: (_e$message = e === null || e === void 0 ? void 0 : e.message) !== null && _e$message !== void 0 ? _e$message : \"에러\"\n        };\n      });\n    } finally {\n      setLoadingMap(m => ({\n        ...m,\n        [sessionId]: false\n      }));\n    }\n  };\n\n  // ===== 포맷팅 유틸 =====\n  function fmtNum(x, digits = 3) {\n    if (x === null || x === undefined || Number.isNaN(x)) return \"-\";\n    return new Intl.NumberFormat(\"ko-KR\", {\n      maximumFractionDigits: digits\n    }).format(x);\n  }\n  function fmtPercent(x) {\n    if (x === null || x === undefined || Number.isNaN(x)) return \"-\";\n    return `${new Intl.NumberFormat(\"ko-KR\", {\n      maximumFractionDigits: 1\n    }).format(x * 100)}%`;\n  }\n  // latency: 값이 5 미만이면 초로 보고 ms로 변환(예: 0.25 -> 250 ms), 아니면 그대로 ms\n  function toMs(x) {\n    if (x === null || x === undefined || Number.isNaN(x)) return null;\n    return x < 5 ? x * 1000 : x;\n  }\n\n  // ===== 미니 차트 컴포넌트들 =====\n\n  // 1) 성공률 링 차트 (CSS conic-gradient)\n  const MiniRing = ({\n    percent,\n    size = 48,\n    label = \"성공률\"\n  }) => {\n    const p = percent !== null && percent !== void 0 ? percent : 0;\n    const pct = Math.max(0, Math.min(100, p * 100));\n    const bg = `conic-gradient(#4f46e5 ${pct}%, #e5e7eb ${pct}% 100%)`; // indigo / gray-200\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mini-ring\",\n      style: {\n        width: size,\n        height: size,\n        background: bg\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mini-ring-inner\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mini-ring-text\",\n          children: [Math.round(pct), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mini-caption\",\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  };\n\n  // 2) 미니 바(두 값 비교: action vs observation)\n  const MiniBars = ({\n    title,\n    a,\n    b,\n    unit = \"ms\",\n    cap\n  }) => {\n    const av = unit === \"ms\" ? toMs(a) : a;\n    const bv = unit === \"ms\" ? toMs(b) : b;\n    const maxV = cap !== null && cap !== void 0 ? cap : Math.max(1, ...[av !== null && av !== void 0 ? av : 0, bv !== null && bv !== void 0 ? bv : 0].map(x => Math.abs(x)));\n    const aW = av != null ? Math.round(Math.abs(av) / maxV * 100) : 0;\n    const bW = bv != null ? Math.round(Math.abs(bv) / maxV * 100) : 0;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mini-bars\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mini-title\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mini-bar-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mini-bar-label\",\n          children: \"action\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mini-bar-track\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mini-bar-fill a\",\n            style: {\n              width: `${aW}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mini-bar-val\",\n          children: unit === \"ms\" ? `${fmtNum(av)} ms` : fmtNum(av)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mini-bar-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mini-bar-label\",\n          children: \"obs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mini-bar-track\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mini-bar-fill b\",\n            style: {\n              width: `${bW}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mini-bar-val\",\n          children: unit === \"ms\" ? `${fmtNum(bv)} ms` : fmtNum(bv)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this);\n  };\n\n  // 3) 에러바(평균±표준편차) — 작은 가로 막대\n  const MiniErrorBar = ({\n    title,\n    mean,\n    std,\n    cap\n  }) => {\n    const m = mean !== null && mean !== void 0 ? mean : 0;\n    const s = Math.max(0, std !== null && std !== void 0 ? std : 0);\n    const lo = m - s;\n    const hi = m + s;\n    const maxAbs = cap !== null && cap !== void 0 ? cap : Math.max(1e-6, Math.abs(m) + s, Math.abs(lo), Math.abs(hi));\n    const W = 120; // px\n    const centerX = W / 2;\n    const scale = centerX / maxAbs; // -maxAbs..+maxAbs → 0..W\n\n    const x0 = Math.max(0, Math.min(W, centerX + lo * scale));\n    const x1 = Math.max(0, Math.min(W, centerX + hi * scale));\n    const xm = Math.max(0, Math.min(W, centerX + m * scale));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mini-errorbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mini-title\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n        width: W,\n        height: 20,\n        children: [/*#__PURE__*/_jsxDEV(\"line\", {\n          x1: 0,\n          y1: 10,\n          x2: W,\n          y2: 10,\n          stroke: \"#e5e7eb\",\n          strokeWidth: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n          x1: centerX,\n          y1: 5,\n          x2: centerX,\n          y2: 15,\n          stroke: \"#9ca3af\",\n          strokeWidth: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n          x1: x0,\n          y1: 10,\n          x2: x1,\n          y2: 10,\n          stroke: \"#4f46e5\",\n          strokeWidth: 4\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n          cx: xm,\n          cy: 10,\n          r: 3.5,\n          fill: \"#111827\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mini-meta\",\n        children: [\"\\u03BC=\", fmtNum(mean), \" / \\u03C3=\", fmtNum(std)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this);\n  };\n  const StatsBlock = ({\n    s\n  }) => {\n    var _s$stats, _st$latency$action_pr, _st$latency, _st$latency$observati, _st$latency2, _st$tracking_error, _st$joint_velocity_di, _te$mean, _te$std, _jv$mean, _jv$std, _st$command$success_r, _st$command;\n    if (!s) return null;\n    if (!s.found) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-box error\",\n      children: \"\\uD574\\uB2F9 \\uC138\\uC158 \\uD1B5\\uACC4\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 26\n    }, this);\n    const st = (_s$stats = s.stats) !== null && _s$stats !== void 0 ? _s$stats : {};\n    const a = (_st$latency$action_pr = (_st$latency = st.latency) === null || _st$latency === void 0 ? void 0 : _st$latency.action_prev) !== null && _st$latency$action_pr !== void 0 ? _st$latency$action_pr : {};\n    const o = (_st$latency$observati = (_st$latency2 = st.latency) === null || _st$latency2 === void 0 ? void 0 : _st$latency2.observation_prev) !== null && _st$latency$observati !== void 0 ? _st$latency$observati : {};\n    const te = (_st$tracking_error = st.tracking_error) !== null && _st$tracking_error !== void 0 ? _st$tracking_error : {};\n    const jv = (_st$joint_velocity_di = st.joint_velocity_diff) !== null && _st$joint_velocity_di !== void 0 ? _st$joint_velocity_di : {};\n\n    // latency 스케일 자동 산정(최댓값 기준)\n    const msA = toMs(a.mean);\n    const msO = toMs(o.mean);\n    const msCap = Math.max(100, ...[msA !== null && msA !== void 0 ? msA : 0, msO !== null && msO !== void 0 ? msO : 0]); // 최소 100ms\n\n    // errorbar 스케일(절대값 기준 자동)\n    const errCap = Math.max(1e-3, Math.abs((_te$mean = te.mean) !== null && _te$mean !== void 0 ? _te$mean : 0) + Math.abs((_te$std = te.std) !== null && _te$std !== void 0 ? _te$std : 0), Math.abs((_jv$mean = jv.mean) !== null && _jv$mean !== void 0 ? _jv$mean : 0) + Math.abs((_jv$std = jv.std) !== null && _jv$std !== void 0 ? _jv$std : 0));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-box\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mini-grid\",\n        children: [/*#__PURE__*/_jsxDEV(MiniRing, {\n          percent: (_st$command$success_r = (_st$command = st.command) === null || _st$command === void 0 ? void 0 : _st$command.success_rate) !== null && _st$command$success_r !== void 0 ? _st$command$success_r : null,\n          label: \"\\uC131\\uACF5\\uB960\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MiniBars, {\n          title: \"\\uC9C0\\uC5F0\\uC2DC\\uAC04 (\\uD3C9\\uADE0)\",\n          a: a.mean,\n          b: o.mean,\n          unit: \"ms\",\n          cap: msCap\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MiniErrorBar, {\n          title: \"\\uD2B8\\uB798\\uD0B9 \\uC5D0\\uB7EC (\\u03BC\\xB1\\u03C3)\",\n          mean: te.mean,\n          std: te.std,\n          cap: errCap\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MiniErrorBar, {\n          title: \"\\uC870\\uC778\\uD2B8 \\uC18D\\uB3C4\\uCC28 (\\u03BC\\xB1\\u03C3)\",\n          mean: jv.mean,\n          std: jv.std,\n          cap: errCap\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this);\n  };\n  const renderCard = (result, idx) => {\n    var _statsMap$sid;\n    const sid = String(result.session_id);\n    const isOpen = !!openMap[sid];\n    const isLoading = !!loadingMap[sid];\n    const err = errorMap[sid];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"result-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [result.session_id, \" - \", result.camera_id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: el => {\n          if (videoRefs.current) videoRefs.current[idx] = el;\n        },\n        src: result.video_url,\n        controls: true,\n        autoPlay: true,\n        muted: true,\n        width: \"320\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => fetchStats(sid),\n          disabled: isLoading,\n          children: isLoading ? \"불러오는 중...\" : isOpen ? \"통계 닫기\" : \"통계 보기\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stats-box error\",\n        children: [\"\\uC5D0\\uB7EC: \", err]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }, this), isOpen && /*#__PURE__*/_jsxDEV(StatsBlock, {\n        s: (_statsMap$sid = statsMap[sid]) !== null && _statsMap$sid !== void 0 ? _statsMap$sid : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 20\n      }, this)]\n    }, sid, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\uAC80\\uC0C9\\uC5B4\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694...\",\n        value: query,\n        onChange: e => setQuery(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSearch,\n        children: \"\\uAC80\\uC0C9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD14D\\uC2A4\\uD2B8 \\u2192 \\uD14D\\uC2A4\\uD2B8 \\uACB0\\uACFC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), textResults.slice(0, 5).map((r, idx) => renderCard(r, idx))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD14D\\uC2A4\\uD2B8 \\u2192 \\uC774\\uBBF8\\uC9C0 \\uACB0\\uACFC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), imageResults.slice(0, 5).map((r, idx) => renderCard(r, idx))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchPage, \"3eQXbKHIcTMuI44xsfs9Qrd3KN0=\", false, function () {\n  return [useSearchVideos];\n});\n_c = SearchPage;\nexport default SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","useSearchVideos","jsxDEV","_jsxDEV","SearchPage","_s","query","setQuery","textResults","imageResults","videoRefs","handleSearch","statsMap","setStatsMap","openMap","setOpenMap","loadingMap","setLoadingMap","errorMap","setErrorMap","fetchStats","sessionId","m","res","fetch","encodeURIComponent","ok","msg","text","Error","status","data","json","e","_e$message","message","fmtNum","x","digits","undefined","Number","isNaN","Intl","NumberFormat","maximumFractionDigits","format","fmtPercent","toMs","MiniRing","percent","size","label","p","pct","Math","max","min","bg","className","style","width","height","background","children","round","fileName","_jsxFileName","lineNumber","columnNumber","MiniBars","title","a","b","unit","cap","av","bv","maxV","map","abs","aW","bW","MiniErrorBar","mean","std","s","lo","hi","maxAbs","W","centerX","scale","x0","x1","xm","y1","x2","y2","stroke","strokeWidth","cx","cy","r","fill","StatsBlock","_s$stats","_st$latency$action_pr","_st$latency","_st$latency$observati","_st$latency2","_st$tracking_error","_st$joint_velocity_di","_te$mean","_te$std","_jv$mean","_jv$std","_st$command$success_r","_st$command","found","st","stats","latency","action_prev","o","observation_prev","te","tracking_error","jv","joint_velocity_diff","msA","msO","msCap","errCap","command","success_rate","renderCard","result","idx","_statsMap$sid","sid","String","session_id","isOpen","isLoading","err","camera_id","ref","el","current","src","video_url","controls","autoPlay","muted","onClick","disabled","type","placeholder","value","onChange","target","slice","_c","$RefreshReg$"],"sources":["/home/user2/문서/agentApp/frontend/src/components/SearchPage.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"../SearchPage.css\";\nimport { useSearchVideos } from \"../hooks/useSearchVideos\";\n\ntype StatsResponse = {\n  session_id: string;\n  found: boolean;\n  stats: {\n    latency?: {\n      action_prev?: { mean?: number; std?: number };\n      observation_prev?: { mean?: number; std?: number };\n    };\n    command?: { success_rate?: number };\n    tracking_error?: { mean?: number; std?: number };\n    joint_velocity_diff?: { mean?: number; std?: number };\n  } | null;\n};\n\nconst SearchPage: React.FC = () => {\n  const {\n    query,\n    setQuery,\n    textResults,\n    imageResults,\n    videoRefs,\n    handleSearch,\n  } = useSearchVideos();\n\n  // 카드별 통계 데이터/로딩/오류 상태 관리 (session_id 기준)\n  const [statsMap, setStatsMap] = useState<Record<string, StatsResponse | null>>({});\n  const [openMap, setOpenMap] = useState<Record<string, boolean>>({});\n  const [loadingMap, setLoadingMap] = useState<Record<string, boolean>>({});\n  const [errorMap, setErrorMap] = useState<Record<string, string | null>>({});\n\n  const fetchStats = async (sessionId: string) => {\n    // 이미 불러온 게 있으면 열기/닫기만 토글\n    if (statsMap[sessionId]) {\n      setOpenMap((m) => ({ ...m, [sessionId]: !m[sessionId] }));\n      return;\n    }\n    try {\n      setLoadingMap((m) => ({ ...m, [sessionId]: true }));\n      setErrorMap((m) => ({ ...m, [sessionId]: null }));\n      const res = await fetch(`http://localhost:8000/api/stats/${encodeURIComponent(sessionId)}`);\n      if (!res.ok) {\n        const msg = await res.text();\n        throw new Error(msg || `HTTP ${res.status}`);\n      }\n      const data: StatsResponse = await res.json();\n      setStatsMap((m) => ({ ...m, [sessionId]: data }));\n      setOpenMap((m) => ({ ...m, [sessionId]: true }));\n    } catch (e: any) {\n      setErrorMap((m) => ({ ...m, [sessionId]: e?.message ?? \"에러\" }));\n    } finally {\n      setLoadingMap((m) => ({ ...m, [sessionId]: false }));\n    }\n  };\n\n  // ===== 포맷팅 유틸 =====\n  function fmtNum(x?: number | null, digits = 3) {\n    if (x === null || x === undefined || Number.isNaN(x)) return \"-\";\n    return new Intl.NumberFormat(\"ko-KR\", { maximumFractionDigits: digits }).format(x);\n  }\n  function fmtPercent(x?: number | null) {\n    if (x === null || x === undefined || Number.isNaN(x)) return \"-\";\n    return `${new Intl.NumberFormat(\"ko-KR\", { maximumFractionDigits: 1 }).format(x * 100)}%`;\n  }\n  // latency: 값이 5 미만이면 초로 보고 ms로 변환(예: 0.25 -> 250 ms), 아니면 그대로 ms\n  function toMs(x?: number | null) {\n    if (x === null || x === undefined || Number.isNaN(x)) return null;\n    return x < 5 ? x * 1000 : x;\n  }\n\n  // ===== 미니 차트 컴포넌트들 =====\n\n  // 1) 성공률 링 차트 (CSS conic-gradient)\n  const MiniRing: React.FC<{ percent?: number | null; size?: number; label?: string }> = ({\n    percent,\n    size = 48,\n    label = \"성공률\",\n  }) => {\n    const p = percent ?? 0;\n    const pct = Math.max(0, Math.min(100, p * 100));\n    const bg = `conic-gradient(#4f46e5 ${pct}%, #e5e7eb ${pct}% 100%)`; // indigo / gray-200\n    return (\n      <div className=\"mini-ring\" style={{ width: size, height: size, background: bg }}>\n        <div className=\"mini-ring-inner\">\n          <span className=\"mini-ring-text\">{Math.round(pct)}%</span>\n        </div>\n        <div className=\"mini-caption\">{label}</div>\n      </div>\n    );\n  };\n\n  // 2) 미니 바(두 값 비교: action vs observation)\n  const MiniBars: React.FC<{\n    title: string;\n    a?: number | null;\n    b?: number | null;\n    unit?: \"ms\" | \"raw\";\n    cap?: number; // 스케일 상한 (없으면 자동)\n  }> = ({ title, a, b, unit = \"ms\", cap }) => {\n    const av = unit === \"ms\" ? toMs(a) : a;\n    const bv = unit === \"ms\" ? toMs(b) : b;\n    const maxV =\n      cap ??\n      Math.max(\n        1,\n        ...( [av ?? 0, bv ?? 0].map((x) => Math.abs(x)) ),\n      );\n    const aW = av != null ? Math.round((Math.abs(av) / maxV) * 100) : 0;\n    const bW = bv != null ? Math.round((Math.abs(bv) / maxV) * 100) : 0;\n\n    return (\n      <div className=\"mini-bars\">\n        <div className=\"mini-title\">{title}</div>\n        <div className=\"mini-bar-row\">\n          <span className=\"mini-bar-label\">action</span>\n          <div className=\"mini-bar-track\">\n            <div className=\"mini-bar-fill a\" style={{ width: `${aW}%` }} />\n          </div>\n          <span className=\"mini-bar-val\">\n            {unit === \"ms\" ? `${fmtNum(av)} ms` : fmtNum(av)}\n          </span>\n        </div>\n        <div className=\"mini-bar-row\">\n          <span className=\"mini-bar-label\">obs</span>\n          <div className=\"mini-bar-track\">\n            <div className=\"mini-bar-fill b\" style={{ width: `${bW}%` }} />\n          </div>\n          <span className=\"mini-bar-val\">\n            {unit === \"ms\" ? `${fmtNum(bv)} ms` : fmtNum(bv)}\n          </span>\n        </div>\n      </div>\n    );\n  };\n\n  // 3) 에러바(평균±표준편차) — 작은 가로 막대\n  const MiniErrorBar: React.FC<{\n    title: string;\n    mean?: number | null;\n    std?: number | null;\n    cap?: number; // 스케일 상한 (없으면 자동)\n  }> = ({ title, mean, std, cap }) => {\n    const m = mean ?? 0;\n    const s = Math.max(0, std ?? 0);\n    const lo = m - s;\n    const hi = m + s;\n    const maxAbs = cap ?? Math.max(1e-6, Math.abs(m) + s, Math.abs(lo), Math.abs(hi));\n    const W = 120; // px\n    const centerX = W / 2;\n    const scale = centerX / maxAbs; // -maxAbs..+maxAbs → 0..W\n\n    const x0 = Math.max(0, Math.min(W, centerX + lo * scale));\n    const x1 = Math.max(0, Math.min(W, centerX + hi * scale));\n    const xm = Math.max(0, Math.min(W, centerX + m * scale));\n\n    return (\n      <div className=\"mini-errorbar\">\n        <div className=\"mini-title\">{title}</div>\n        <svg width={W} height={20}>\n          {/* 기준선 */}\n          <line x1={0} y1={10} x2={W} y2={10} stroke=\"#e5e7eb\" strokeWidth={2} />\n          {/* 0점 */}\n          <line x1={centerX} y1={5} x2={centerX} y2={15} stroke=\"#9ca3af\" strokeWidth={1} />\n          {/* 구간(lo-hi) */}\n          <line x1={x0} y1={10} x2={x1} y2={10} stroke=\"#4f46e5\" strokeWidth={4} />\n          {/* 평균점 */}\n          <circle cx={xm} cy={10} r={3.5} fill=\"#111827\" />\n        </svg>\n        <div className=\"mini-meta\">\n          μ={fmtNum(mean)} / σ={fmtNum(std)}\n        </div>\n      </div>\n    );\n  };\n\n  const StatsBlock: React.FC<{ s: StatsResponse | null }> = ({ s }) => {\n    if (!s) return null;\n    if (!s.found) return <div className=\"stats-box error\">해당 세션 통계가 없습니다.</div>;\n\n    const st = s.stats ?? {};\n    const a = st.latency?.action_prev ?? {};\n    const o = st.latency?.observation_prev ?? {};\n    const te = st.tracking_error ?? {};\n    const jv = st.joint_velocity_diff ?? {};\n\n    // latency 스케일 자동 산정(최댓값 기준)\n    const msA = toMs(a.mean);\n    const msO = toMs(o.mean);\n    const msCap = Math.max(100, ...( [msA ?? 0, msO ?? 0] )); // 최소 100ms\n\n    // errorbar 스케일(절대값 기준 자동)\n    const errCap = Math.max(\n      1e-3,\n      Math.abs(te.mean ?? 0) + Math.abs(te.std ?? 0),\n      Math.abs(jv.mean ?? 0) + Math.abs(jv.std ?? 0)\n    );\n\n    return (\n      <div className=\"stats-box\">\n        <div className=\"mini-grid\">\n          {/* 성공률 링 */}\n          <MiniRing percent={st.command?.success_rate ?? null} label=\"성공률\" />\n\n          {/* 지연시간 비교 바 */}\n          <MiniBars\n            title=\"지연시간 (평균)\"\n            a={a.mean}\n            b={o.mean}\n            unit=\"ms\"\n            cap={msCap}\n          />\n\n          {/* 트래킹 에러 에러바 */}\n          <MiniErrorBar\n            title=\"트래킹 에러 (μ±σ)\"\n            mean={te.mean}\n            std={te.std}\n            cap={errCap}\n          />\n\n          {/* 조인트 속도차 에러바 */}\n          <MiniErrorBar\n            title=\"조인트 속도차 (μ±σ)\"\n            mean={jv.mean}\n            std={jv.std}\n            cap={errCap}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  const renderCard = (result: any, idx: number) => {\n    const sid = String(result.session_id);\n    const isOpen = !!openMap[sid];\n    const isLoading = !!loadingMap[sid];\n    const err = errorMap[sid];\n\n    return (\n      <div key={sid} className=\"result-card\">\n        <p>\n          {result.session_id} - {result.camera_id}\n        </p>\n        <video\n          ref={(el) => {\n            if (videoRefs.current) videoRefs.current[idx] = el;\n          }}\n          src={result.video_url}\n          controls\n          autoPlay\n          muted\n          width=\"320\"\n        />\n        <div className=\"card-actions\">\n          <button onClick={() => fetchStats(sid)} disabled={isLoading}>\n            {isLoading ? \"불러오는 중...\" : isOpen ? \"통계 닫기\" : \"통계 보기\"}\n          </button>\n        </div>\n        {err && <div className=\"stats-box error\">에러: {err}</div>}\n        {isOpen && <StatsBlock s={statsMap[sid] ?? null} />}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"search-container\">\n      {/* 검색 박스 */}\n      <div className=\"search-box\">\n        <input\n          type=\"text\"\n          placeholder=\"검색어를 입력하세요...\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n        />\n        <button onClick={handleSearch}>검색</button>\n      </div>\n\n      {/* 검색 결과 */}\n      <div className=\"results-grid\">\n        {/* 텍스트 → 텍스트 결과 */}\n        <div className=\"results-column\">\n          <h2>텍스트 → 텍스트 결과</h2>\n          {textResults.slice(0, 5).map((r: any, idx: number) => renderCard(r, idx))}\n        </div>\n\n        {/* 텍스트 → 이미지 결과 */}\n        <div className=\"results-column\">\n          <h2>텍스트 → 이미지 결과</h2>\n          {imageResults.slice(0, 5).map((r: any, idx: number) => renderCard(r, idx))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}